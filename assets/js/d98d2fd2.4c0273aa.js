"use strict";(self.webpackChunkcicon_docs=self.webpackChunkcicon_docs||[]).push([[936],{5797:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var t=n(4848),r=n(8453);const i={sidebar_position:3},a="Main Repair Flow",o={id:"main-repair-flow",title:"Main Repair Flow",description:"The main repair flow of the application is a multi-step process that guides users through submitting their shoe repair details, selecting repair services, and completing the checkout process. Each stage of the process is rendered dynamically based on the URL stage parameter.",source:"@site/docs/main-repair-flow.md",sourceDirName:".",slug:"/main-repair-flow",permalink:"/main-repair-flow",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Database Structure",permalink:"/architecture/database"},next:{title:"API Routes",permalink:"/category/api-routes"}},l={},d=[{value:"Stages Overview",id:"stages-overview",level:2},{value:"Stages:",id:"stages",level:3},{value:"<strong>Stage Flow</strong> (<code>app/stages/[stage]/page.tsx</code>)",id:"stage-flow-appstagesstagepagetsx",level:2},{value:"Key Hooks Used:",id:"key-hooks-used",level:3},{value:"Functions:",id:"functions",level:3},{value:"<strong>Prompt and Photo Upload Stage</strong> (<code>app/stages/PromptAndPhotoUploadComponent.tsx</code>)",id:"prompt-and-photo-upload-stage-appstagespromptandphotouploadcomponenttsx",level:2},{value:"Features:",id:"features",level:3},{value:"<strong>Analysis Stage</strong> (<code>app/stages/AnalysisComponent.tsx</code>)",id:"analysis-stage-appstagesanalysiscomponenttsx",level:2},{value:"Key Points:",id:"key-points",level:3},{value:"<strong>Repair Selection and Order Completion Stage</strong> (<code>app/stages/ProductsAndServicesComponent.tsx</code>)",id:"repair-selection-and-order-completion-stage-appstagesproductsandservicescomponenttsx",level:2},{value:"Features:",id:"features-1",level:3},{value:"<strong>Order Details Stage</strong> (<code>app/stages/DetailsComponent.tsx</code>)",id:"order-details-stage-appstagesdetailscomponenttsx",level:2},{value:"Key Points:",id:"key-points-1",level:3},{value:"<strong>Checkout Stage</strong> (<code>app/stages/CheckoutComponent.tsx</code>)",id:"checkout-stage-appstagescheckoutcomponenttsx",level:2},{value:"Features:",id:"features-2",level:3},{value:"<strong>Payment Success Stage</strong> (<code>app/components/PaymentReviewComponent.tsx</code>)",id:"payment-success-stage-appcomponentspaymentreviewcomponenttsx",level:2},{value:"Flow Summary:",id:"flow-summary",level:3}];function c(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"main-repair-flow",children:"Main Repair Flow"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.strong,{children:"main repair flow"})," of the application is a multi-step process that guides users through submitting their shoe repair details, selecting repair services, and completing the checkout process. Each stage of the process is rendered dynamically based on the URL stage parameter."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"stages-overview",children:"Stages Overview"}),"\n",(0,t.jsx)(s.h3,{id:"stages",children:"Stages:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Prompt and Photo Upload Stage"}),": Users provide details about their shoes and upload photos."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Analysis Stage"}),": The application analyzes the uploaded photos and generates repair suggestions."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Repair Selection Stage"}),": Users select repair services and additional product recommendations for their shoes."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Checkout Stage"}),": Users review their order and complete the payment process."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Payment Success Stage"}),": The final stage where users are shown a summary of their order and payment status."]}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.h2,{id:"stage-flow-appstagesstagepagetsx",children:[(0,t.jsx)(s.strong,{children:"Stage Flow"})," (",(0,t.jsx)(s.code,{children:"app/stages/[stage]/page.tsx"}),")"]}),"\n",(0,t.jsx)(s.p,{children:"This component renders different child components based on the current stage, such as uploading images, analyzing faults, selecting repairs, completing the order, and making payments."}),"\n",(0,t.jsx)(s.h3,{id:"key-hooks-used",children:"Key Hooks Used:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"useParams"})}),": Fetches the stage parameter from the URL."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"useRouter"})}),": Manages navigation between stages."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"useStageContext"})}),": Accesses shared state for each stage."]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"functions",children:"Functions:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"handleBasketToDetails"})}),": Transitions from repair selection to order details by setting the total amount."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"handleDetailsToCheckout"})}),": Proceeds from order details to the checkout stage."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"renderStageComponent"})}),": Renders the appropriate stage based on the current URL parameter."]}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.h2,{id:"prompt-and-photo-upload-stage-appstagespromptandphotouploadcomponenttsx",children:[(0,t.jsx)(s.strong,{children:"Prompt and Photo Upload Stage"})," (",(0,t.jsx)(s.code,{children:"app/stages/PromptAndPhotoUploadComponent.tsx"}),")"]}),"\n",(0,t.jsx)(s.p,{children:"In this stage, users:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Provide prompts describing their shoe repairs."}),"\n",(0,t.jsx)(s.li,{children:"Upload up to 3 photos per repair."}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"features",children:"Features:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Multiple repair sections can be added, up to a limit of 3."}),"\n",(0,t.jsx)(s.li,{children:"Each section has a prompt and file upload area."}),"\n",(0,t.jsx)(s.li,{children:"Files are validated (e.g., max 3 files per repair section)."}),"\n",(0,t.jsx)(s.li,{children:"User is required to input prompts and upload photos before proceeding to the next stage."}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.h2,{id:"analysis-stage-appstagesanalysiscomponenttsx",children:[(0,t.jsx)(s.strong,{children:"Analysis Stage"})," (",(0,t.jsx)(s.code,{children:"app/stages/AnalysisComponent.tsx"}),")"]}),"\n",(0,t.jsx)(s.p,{children:"This stage processes the uploaded photos and prompts to generate repair suggestions. The application:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Sends the images and prompts to a backend service for analysis."}),"\n",(0,t.jsx)(s.li,{children:"Receives fault analysis, repair services, and product suggestions."}),"\n",(0,t.jsx)(s.li,{children:"Automatically transitions to the repair selection stage once the analysis is complete."}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"key-points",children:"Key Points:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"If faults or files are missing, an error message is displayed."}),"\n",(0,t.jsx)(s.li,{children:"The analysis result (fault info) is stored in the context for the next stage."}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.h2,{id:"repair-selection-and-order-completion-stage-appstagesproductsandservicescomponenttsx",children:[(0,t.jsx)(s.strong,{children:"Repair Selection and Order Completion Stage"})," (",(0,t.jsx)(s.code,{children:"app/stages/ProductsAndServicesComponent.tsx"}),")"]}),"\n",(0,t.jsx)(s.p,{children:"In this stage, users:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"View suggested repair services based on the analysis results."}),"\n",(0,t.jsx)(s.li,{children:'Select between repair options (e.g., "pair" or "single" shoe repair).'}),"\n",(0,t.jsx)(s.li,{children:"Optionally add recommended products to their order."}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"features-1",children:"Features:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Services and products are dynamically displayed based on analysis."}),"\n",(0,t.jsx)(s.li,{children:"Users can toggle between repair options and add items to the cart."}),"\n",(0,t.jsx)(s.li,{children:"A cart summary displays selected services, products, and the total amount."}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.h2,{id:"order-details-stage-appstagesdetailscomponenttsx",children:[(0,t.jsx)(s.strong,{children:"Order Details Stage"})," (",(0,t.jsx)(s.code,{children:"app/stages/DetailsComponent.tsx"}),")"]}),"\n",(0,t.jsx)(s.p,{children:"Users enter their personal and shipping details, such as:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"First Name"}),"\n",(0,t.jsx)(s.li,{children:"Last Name"}),"\n",(0,t.jsx)(s.li,{children:"Email Address"}),"\n",(0,t.jsx)(s.li,{children:"Phone Number"}),"\n",(0,t.jsx)(s.li,{children:"Street Address, City, and Postal Code"}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"key-points-1",children:"Key Points:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"The entered details are stored in the context and linked to the current order."}),"\n",(0,t.jsx)(s.li,{children:"Once submitted, the application proceeds to the checkout stage."}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.h2,{id:"checkout-stage-appstagescheckoutcomponenttsx",children:[(0,t.jsx)(s.strong,{children:"Checkout Stage"})," (",(0,t.jsx)(s.code,{children:"app/stages/CheckoutComponent.tsx"}),")"]}),"\n",(0,t.jsx)(s.p,{children:"In this stage, users:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Review their selected services, products, and the total amount."}),"\n",(0,t.jsxs)(s.li,{children:["Complete the payment process using Stripe\u2019s ",(0,t.jsx)(s.code,{children:"CardElement"}),"."]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"features-2",children:"Features:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Payment processing with Stripe\u2019s API."}),"\n",(0,t.jsx)(s.li,{children:"Payment is held until the cobbler confirms the repair job."}),"\n",(0,t.jsx)(s.li,{children:"Errors during payment are handled gracefully."}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.h2,{id:"payment-success-stage-appcomponentspaymentreviewcomponenttsx",children:[(0,t.jsx)(s.strong,{children:"Payment Success Stage"})," (",(0,t.jsx)(s.code,{children:"app/components/PaymentReviewComponent.tsx"}),")"]}),"\n",(0,t.jsx)(s.p,{children:"After a successful payment, users are shown:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"A summary of the services and products they\u2019ve selected."}),"\n",(0,t.jsx)(s.li,{children:"The total amount paid."}),"\n",(0,t.jsx)(s.li,{children:"A message informing them that the payment is on hold until the cobbler confirms the order."}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"flow-summary",children:"Flow Summary:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"User"})," uploads shoe details and photos."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"System"})," analyzes faults and generates service and product suggestions."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"User"})," selects repair services and optional products."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"User"})," enters personal details and confirms the order."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"User"})," reviews and completes the payment."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"System"})," confirms the payment and notifies the user about the order status."]}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.p,{children:"This flow handles both the user interaction and backend communication to process orders, analyze faults, and facilitate payments using Stripe."})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>o});var t=n(6540);const r={},i=t.createContext(r);function a(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);