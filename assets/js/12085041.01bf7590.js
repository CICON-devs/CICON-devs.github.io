"use strict";(self.webpackChunkcicon_docs=self.webpackChunkcicon_docs||[]).push([[72],{2326:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>c,toc:()=>a});var s=r(4848),i=r(8453);const o={sidebar_position:4},t="Cobbler Stripe Onboarding (Live)",c={id:"api-routes/stripe-onboarding",title:"Cobbler Stripe Onboarding (Live)",description:"Overview",source:"@site/docs/api-routes/stripe-onboarding.md",sourceDirName:"api-routes",slug:"/api-routes/stripe-onboarding",permalink:"/api-routes/stripe-onboarding",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Stripe Test Environment",permalink:"/api-routes/stripe"},next:{title:"Twilio",permalink:"/api-routes/twilio"}},l={},a=[{value:"Overview",id:"overview",level:2},{value:"Routes",id:"routes",level:3},{value:"1. <code>create-account/route.ts</code>",id:"1-create-accountroutets",level:4},{value:"<strong>POST <code>/api/stripe-onboarding/create-account</code></strong>",id:"post-apistripe-onboardingcreate-account",level:5},{value:"2. <code>generate-account-link/route.ts</code>",id:"2-generate-account-linkroutets",level:4},{value:"<strong>POST <code>/api/stripe-onboarding/generate-account-link</code></strong>",id:"post-apistripe-onboardinggenerate-account-link",level:5},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"cobbler-stripe-onboarding-live",children:"Cobbler Stripe Onboarding (Live)"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"api/stripe-onboarding"})," folder contains API routes for handling the onboarding process of cobblers in a live Stripe environment. These routes allow for creating connected accounts and generating onboarding links, which direct users through the Stripe onboarding process."]}),"\n",(0,s.jsx)(n.h3,{id:"routes",children:"Routes"}),"\n",(0,s.jsxs)(n.h4,{id:"1-create-accountroutets",children:["1. ",(0,s.jsx)(n.code,{children:"create-account/route.ts"})]}),"\n",(0,s.jsxs)(n.p,{children:["This route is used to create a new connected Stripe account for cobblers. It operates in the live environment, using the ",(0,s.jsx)(n.code,{children:"LIVE_STRIPE_SECRET_KEY"}),". The account is created with details like the cobbler\u2019s name, email, phone number (converted to an international format if necessary), and business information."]}),"\n",(0,s.jsx)(n.h5,{id:"post-apistripe-onboardingcreate-account",children:(0,s.jsxs)(n.strong,{children:["POST ",(0,s.jsx)(n.code,{children:"/api/stripe-onboarding/create-account"})]})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Purpose"}),": Creates a new connected Stripe Express account for cobblers in the live environment."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Input"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"email"}),": The cobbler's email address."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"firstName"}),": The cobbler's first name."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"lastName"}),": The cobbler's last name."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"phone"}),": The cobbler's phone number (converted to international format if it's a UK number)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"address"}),": The cobbler's address (including ",(0,s.jsx)(n.code,{children:"line1"}),", ",(0,s.jsx)(n.code,{children:"city"}),", ",(0,s.jsx)(n.code,{children:"postal_code"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"companyName"}),": The business name."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Example input:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "email": "cobbler@example.com",\n  "firstName": "John",\n  "lastName": "Doe",\n  "phone": "07123456789",\n  "address": {\n    "line1": "123 Shoe Lane",\n    "city": "London",\n    "postal_code": "EC1A1BB"\n  },\n  "companyName": "Doe Shoe Repairs"\n}\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Steps"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Converts UK phone numbers starting with ",(0,s.jsx)(n.code,{children:"07"})," to international format (",(0,s.jsx)(n.code,{children:"+447"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:["Creates a connected account with Stripe\u2019s Express account type, specifying ",(0,s.jsx)(n.code,{children:"GB"})," as the country and ",(0,s.jsx)(n.code,{children:"5611"})," as the Merchant Category Code (MCC) for shoe repair services."]}),"\n",(0,s.jsx)(n.li,{children:"Sets the cobbler's business details, including their name, phone number, and address."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Returns the newly created Stripe account ID."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example Response"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "accountId": "acct_live_123456789"\n}\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Error Responses"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"500: Error creating the Stripe account."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h4,{id:"2-generate-account-linkroutets",children:["2. ",(0,s.jsx)(n.code,{children:"generate-account-link/route.ts"})]}),"\n",(0,s.jsx)(n.p,{children:"This route generates an onboarding link for a Stripe connected account in the live environment. The link directs cobblers to complete the onboarding process, where they can provide additional business details and agree to Stripe\u2019s terms."}),"\n",(0,s.jsx)(n.h5,{id:"post-apistripe-onboardinggenerate-account-link",children:(0,s.jsxs)(n.strong,{children:["POST ",(0,s.jsx)(n.code,{children:"/api/stripe-onboarding/generate-account-link"})]})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Purpose"}),": Generates an account onboarding link for a connected Stripe account in the live environment."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Input"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"accountId"}),": The ID of the connected Stripe account."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Example input:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "accountId": "acct_live_123456789"\n}\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Steps"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Constructs the base URL dynamically from the request headers."}),"\n",(0,s.jsx)(n.li,{children:"Generates an account onboarding link with refresh and return URLs, directing the cobbler to complete the onboarding process."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Returns the generated account onboarding URL."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example Response"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "url": "https://connect.stripe.com/setup/s/abc123/live"\n}\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Error Responses"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"500: Error generating the account link."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"stripe-onboarding"})," routes are essential for managing live onboarding of cobblers in the platform, ensuring that their Stripe Express accounts are correctly created and linked for payout processing. The routes also facilitate smooth onboarding with automatically generated links for cobblers to complete their setup."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:["This documentation provides a clear overview of how to interact with Stripe in a live environment for the ",(0,s.jsx)(n.code,{children:"stripe-onboarding"})," folder, including both account creation and link generation."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>c});var s=r(6540);const i={},o=s.createContext(i);function t(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);